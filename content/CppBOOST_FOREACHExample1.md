



 

 

 

 

 

([C++](Cpp.htm)) [BOOST\_FOREACH Example1](CppBOOST_FOREACHExample1.htm)
========================================================================

 

[BOOST\_FOREACH Example1](CppBOOST_FOREACHExample1.htm) is a
[BOOST\_FOREACH](CppBOOST_FOREACH.htm) example.

 

-   [Download the Qt Creator project
    'BOOST\_FOREACHExample1' (zip)](CppBOOST_FOREACHExample1.zip)

 

 

 

 

Technical facts
---------------

 

[Application type(s)](CppApplication.htm)

-   ![Desktop](PicDesktop.png) [Desktop
    application](CppDesktopApplication.htm)

[Operating system(s) or programming environment(s)](CppOs.htm)

-   ![Lubuntu](PicLubuntu.png) [Lubuntu](CppLubuntu.htm) 11.10 (oneiric)

[IDE(s)](CppIde.htm):

-   ![Qt Creator](PicQtCreator.png) [Qt Creator](CppQtCreator.htm) 2.3.0

[Project type](CppQtProjectType.htm):

-   ![console](PicConsole.png) [Console
    application](CppConsoleApplication.htm)

[C++ standard](CppStandard.htm):

-   ![C++98](PicCpp98.png) [C++98](Cpp98.htm)

[Compiler(s)](CppCompiler.htm):

-   [G++](CppGpp.htm) 4.6.1

[Libraries](CppLibrary.htm) used:

-   ![Boost](PicBoost.png) [Boost](CppBoost.htm): version 1.42
-   ![STL](PicStl.png) [STL](CppStl.htm): GNU ISO C++ Library, version
    4.6.1

 

 

 

 

 

[Qt project file](CppQtProjectFile.htm): CppBOOST\_FOREACH Example1.pro
-----------------------------------------------------------------------

 

  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  ` #------------------------------------------------- # # Project created by QtCreator 2012-01-26T06:03:38 # #-------------------------------------------------  QT       += core  QT       -= gui  TARGET = CppBOOST_FOREACH Example1 CONFIG   += console CONFIG   -= app_bundle  TEMPLATE = app   SOURCES += main.cpp `
  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

 

 

 

 

 

main.cpp
--------

 

  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  ` #include <iostream> #include <string> #include <vector> #include <boost/foreach.hpp> #include <boost/lexical_cast.hpp>  const std::vector<std::string> f() {   std::vector<std::string> v;   for (int i=0; i!=1000; ++i) { v.push_back( boost::lexical_cast<std::string>(i)); }   return v; }   //GOOD: Compiler warning //const std::vector<std::string>& f_ref() //{ //  std::vector<std::string> v; //  for (int i=0; i!=1000; ++i) { v.push_back( boost::lexical_cast<std::string>(i)); } //  return v; //}  const std::vector<std::string> g() {   static std::vector<std::string> v;   if (!v.empty()) return v;   for (int i=0; i!=1000; ++i) { v.push_back( boost::lexical_cast<std::string>(i)); }   return v; }  const std::vector<std::string>& g_ref() {   static std::vector<std::string> v;   if (!v.empty()) return v;   for (int i=0; i!=1000; ++i) { v.push_back( boost::lexical_cast<std::string>(i)); }   return v; }  int main() {   std::string t;    //BAD: Compiles and crashes program   //std::clog << __func__ << '\n'; BOOST_FOREACH(const std::string  s, f()) { t+=s; }    //BAD: Compiles and crashes program   //std::clog << __func__ << '\n'; BOOST_FOREACH(const std::string& s, f()) { t+=s; }    //GOOD: Compiler warning about f_ref   //std::clog << __func__ << '\n'; BOOST_FOREACH(const std::string  s, f_ref()) { t+=s; }    //GOOD: Compiler warning about f_ref   //std::clog << __func__ << '\n'; BOOST_FOREACH(const std::string& s, f_ref()) { t+=s; }    //BAD: Compiles and crashes program   //std::clog << __func__ << '\n'; BOOST_FOREACH(const std::string  s, g()) { t+=s; }    //BAD: Compiles and crashes program   //std::clog << __func__ << '\n'; BOOST_FOREACH(const std::string& s, g()) { t+=s; }    //GOOD: Works   std::clog << __func__ << '\n'; BOOST_FOREACH(const std::string  s, g_ref()) { t+=s; }    //BEST: Works without making a copy of each std::string   std::clog << __func__ << '\n'; BOOST_FOREACH(const std::string& s, g_ref()) { t+=s; } std::clog << t; }`
  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

 

 

 

 

 





 




This page has been created by the [tool](Tools.htm)
[CodeToHtml](ToolCodeToHtml.htm)
