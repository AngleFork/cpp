
 

 

 

 

 

([C++](Cpp.md)) [boost::property\_tree example 2: read and write and display](CppProperty_treeExample2.md)
============================================================================================================

 

[boost::property\_tree](CppProperty_tree.md) example 2: read and write
and display.

 

-   [Download the Qt Creator project
    'CppProperty\_treeExample2' (zip)](CppProperty_treeExample2.zip)

 

 

 

 

 

Technical facts
---------------

 

[Application type(s)](CppApplication.md)

-   ![Desktop](PicDesktop.png) [Desktop
    application](CppDesktopApplication.md)

[Operating system(s) or programming environment(s)](CppOs.md)

-   ![Lubuntu](PicLubuntu.png) [Lubuntu](CppLubuntu.md) 11.04 (natty)

[IDE(s)](CppIde.md):

-   ![Qt Creator](PicQtCreator.png) [Qt Creator](CppQtCreator.md) 2.0.1

[Project type](CppQtProjectType.md):

-   ![console](PicConsole.png) [Console
    application](CppConsoleApplication.md)

[C++ standard](CppStandard.md):

-   ![C++98](PicCpp98.png) [C++98](Cpp98.md)

[Compiler(s)](CppCompiler.md):

-   [G++](CppGpp.md) 4.5.2

[Libraries](CppLibrary.md) used:

-   ![Boost](PicBoost.png) [Boost](CppBoost.md): version 1.42
-   ![STL](PicStl.png) [STL](CppStl.md): GNU ISO C++ Library, version
    4.5.2

 

 

 

 

 

[Qt project file](CppQtProjectFile.md): CppProperty\_treeExample2.pro
----------------------------------------------------------------------

 

  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  ` #------------------------------------------------- # # Project created by QtCreator 2011-08-13T07:58:58 # #------------------------------------------------- QT       += core QT       -= gui TARGET = CppProperty_treeExample2 CONFIG   += console CONFIG   -= app_bundle TEMPLATE = app SOURCES += main.cpp`
  ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

 

 

 

 

 

main.cpp
--------

 

  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  ` #include <string> #include <iostream> #include <boost/property_tree/ptree.hpp> #include <boost/property_tree/xml_parser.hpp>  #include <cassert> #include <fstream> #include <iostream> #include <string>  struct Person {   std::string m_name;   int m_birth_year;    void Load(const std::string &filename)   {     boost::property_tree::ptree t;     boost::property_tree::xml_parser::read_xml(filename,t);     m_name = t.get<std::string>("Person.name");     m_birth_year = t.get<int>("Person.birth_year");    }   void Save(const std::string &filename) const   {     boost::property_tree::ptree t;     t.put("Person.name", m_name);     t.put("Person.birth_year", m_birth_year);     boost::property_tree::xml_parser::write_xml(filename,t);   }  };  std::ostream& operator<<(std::ostream& os,const Person& p) {   os << p.m_name      << ' ' //Add either a space, tab or newline      << p.m_birth_year;   return os; }  std::istream& operator>>(std::istream& is, Person& p) {   is     >> p.m_name     >> p.m_birth_year;   return is; }  int main() {   //Create a Person and save it to file   {     Person p;     p.m_name = "Bilderbikkel";     p.m_birth_year = 1980;     std::ofstream f("tmp.txt");     f << p;   }   //Load a Person from file and check it is the same   {     std::ifstream f("tmp.txt");     Person p;     f >> p;     assert(p.m_name == "Bilderbikkel");     assert(p.m_birth_year == 1980);   }   //Display tmp.txt   {     std::cout << "Displaying tmp.txt:\n";     std::ifstream f("tmp.txt");     while(!f.eof())     {       std::string s;       std::getline(f,s);       std::cout << s << '\n';     }   }    //Create a Person and save it to XML file   {     Person p;     p.m_name = "Bilderbikkel";     p.m_birth_year = 1980;     p.Save("tmp.xml");   }   //Load a Person from XML file and check it is the same   {     Person p;     p.Load("tmp.xml");     assert(p.m_name == "Bilderbikkel");     assert(p.m_birth_year == 1980);   }   //Display tmp.xml   {     std::cout << "Displaying tmp.xml:\n";     std::ifstream f("tmp.xml");     while(!f.eof())     {       std::string s;       std::getline(f,s);       std::cout << s << '\n';     }   } }`
  --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

 

Screen output:

 

  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------
  ` Displaying tmp.txt: Bilderbikkel 1980 Displaying tmp.xml: <?xml version="1.0" encoding="utf-8"?> <Person><name>Bilderbikkel</name><birth_year>1980</birth_year></Person>`
  -----------------------------------------------------------------------------------------------------------------------------------------------------------------------------

 

 

 

 

 

 

